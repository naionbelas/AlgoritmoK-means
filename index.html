<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projetos - Selecione um</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        /* Estilo para os projetos */
        .project {
            display: none;  /* Inicialmente escondido */
        }

        /* Estilos para o projeto de imobiliária */
        .imobiliaria {
            display: block;
        }

        /* Estilos para a página */

        h1 {
            text-align: center;
        }

        form {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
        }

        input[type="number"], input[type="submit"] {
            padding: 10px;
            margin: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        canvas {
            border: 1px solid #ccc; /* Borda para o canvas */
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Selecione o Projeto a Visualizar</h1>
        <!-- Botões para alternar entre os projetos -->
        
        <button onclick="showProject('kmeans')">K-means</button>
        <button onclick="showProject('imobiliaria')">Imobiliária</button>

        <!-- Div para o projeto de Imobiliária -->
        <div id="imobiliaria" class="project">
            <h1>Lista de Imóveis</h1>
            <form id="filterForm">
                <label for="filter">Filtrar por preço máximo:</label>
                <input type="number" id="filter" placeholder="Preço máximo" required>
                <input type="submit" value="Filtrar">
            </form>
            <table id="imoveisTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Número de Quartos</th>
                        <th>Tamanho do Lote (m²)</th>
                        <th>Localização</th>
                        <th>Preço (R$)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <script>
                const imoveis = [
                    { id: 1, numero_quartos: 3, tamanho_lote: 150.00, localizacao: 'Centro', preco: 300000.00 },
                    { id: 2, numero_quartos: 2, tamanho_lote: 80.00, localizacao: 'Bairro A', preco: 200000.00 },
                    { id: 3, numero_quartos: 4, tamanho_lote: 200.00, localizacao: 'Bairro B', preco: 450000.00 },
                    { id: 4, numero_quartos: 1, tamanho_lote: 60.00, localizacao: 'Bairro C', preco: 150000.00 },
                    { id: 5, numero_quartos: 3, tamanho_lote: 120.00, localizacao: 'Centro', preco: 350000.00 },
                    { id: 6, numero_quartos: 5, tamanho_lote: 250.00, localizacao: 'Bairro D', preco: 600000.00 }
                ];

                function exibirImoveis(imoveisFiltrados) {
                    const tbody = document.querySelector('#imoveisTable tbody');
                    tbody.innerHTML = ''; // Limpa a tabela
                    imoveisFiltrados.forEach(imovel => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${imovel.id}</td>
                            <td>${imovel.numero_quartos}</td>
                            <td>${imovel.tamanho_lote}</td>
                            <td>${imovel.localizacao}</td>
                            <td>${imovel.preco.toFixed(2)}</td>
                        `;
                        tbody.appendChild(row);
                    });
                }

                function filtrarImoveis() {
                    const filterValue = document.querySelector('#filter').value;
                    const imoveisFiltrados = imoveis.filter(imovel => imovel.preco <= filterValue);
                    exibirImoveis(imoveisFiltrados);
                }

                document.querySelector('#filterForm').addEventListener('submit', event => {
                    event.preventDefault();
                    filtrarImoveis();
                });

                exibirImoveis(imoveis);
            </script>
        </div>

        <!-- Div para o projeto de K-means -->
        <div id="kmeans" class="project">
            <div>
                <h1>Algoritmo de Agrupamento de K-médias (K-means)</h1>
                <button onclick="runKMeans()">Executar K-means</button>
            </div>
            
            <canvas id="canvas" width="600" height="400"></canvas>
            
            <script>
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');

                function generateRandomPoints(n, maxX, maxY) {
                    let points = [];
                    for (let i = 0; i < n; i++) {
                        points.push({ x: Math.random() * maxX, y: Math.random() * maxY });
                    }
                    return points;
                }

                function drawPoints(points, clusters = []) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    points.forEach((point, index) => {
                        ctx.beginPath();
                        ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);
                        ctx.fillStyle = clusters[index] ? clusters[index].color : '#000';
                        ctx.fill();
                    });
                }

                function drawCentroids(centroids) {
                    centroids.forEach(centroid => {
                        ctx.beginPath();
                        ctx.arc(centroid.x, centroid.y, 10, 0, 2 * Math.PI);
                        ctx.fillStyle = centroid.color;
                        ctx.fill();
                    });
                }

                function kMeans(points, k = 3, iterations = 100) {
                    let centroids = [];
                    let clusters = [];
                    let colors = ['#FF5733', '#33FF57', '#3357FF'];

                    for (let i = 0; i < k; i++) {
                        centroids.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, color: colors[i] });
                    }

                    for (let iter = 0; iter < iterations; iter++) {
                        clusters = points.map(point => {
                            let distances = centroids.map(centroid => Math.sqrt(Math.pow(centroid.x - point.x, 2) + Math.pow(centroid.y - point.y, 2)));
                            let closestCentroidIndex = distances.indexOf(Math.min(...distances));
                            return centroids[closestCentroidIndex];
                        });

                        let newCentroids = centroids.map((centroid, i) => {
                            let assignedPoints = points.filter((point, index) => clusters[index] === centroid);
                            let newX = assignedPoints.reduce((sum, point) => sum + point.x, 0) / assignedPoints.length;
                            let newY = assignedPoints.reduce((sum, point) => sum + point.y, 0) / assignedPoints.length;
                            return { ...centroid, x: newX, y: newY };
                        });

                        if (newCentroids.every((newCentroid, i) => newCentroid.x === centroids[i].x && newCentroid.y === centroids[i].y)) {
                            break;
                        }
                        centroids = newCentroids;
                    }

                    return { clusters, centroids };
                }

                function runKMeans() {
                    let points = generateRandomPoints(100, canvas.width, canvas.height);
                    let { clusters, centroids } = kMeans(points, 3);
                    drawPoints(points, clusters);
                    drawCentroids(centroids);
                }

                runKMeans();
            </script>
        </div>
    </div>

    <script>
        function showProject(project) {
            document.querySelectorAll('.project').forEach(div => {
                div.style.display = 'none';
            });
            document.getElementById(project).style.display = 'block';
        }

        // Exibe o projeto K-means por padrão
        showProject('kmeans');
    </script>

</body>
</html>
